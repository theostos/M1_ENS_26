<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.Linter.UnusedTactic</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.Linter.UnusedTactic";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">Linter</span>.<span class="name">UnusedTactic</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/Tactic/Linter/UnusedTactic.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init.html">Init</a></li><li><a href="../../.././Batteries/Tactic/Unreachable.html">Batteries.Tactic.Unreachable</a></li><li><a href="../../.././Lean/Parser/Syntax.html">Lean.Parser.Syntax</a></li><li><a href="../../.././Mathlib/Tactic/Linter/Header.html">Mathlib.Tactic.Linter.Header</a></li><li><a href="../../.././Mathlib/Tactic/Linter/UnusedTacticExtension.html">Mathlib.Tactic.Linter.UnusedTacticExtension</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.Linter.UnusedTactic" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Linter.linter.unusedTactic"><span class="name">Mathlib</span>.<span class="name">Linter</span>.<span class="name">linter</span>.<span class="name">unusedTactic</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="The-unused-tactic-linter">The unused tactic linter <a class="hover-link" href="#The-unused-tactic-linter">#</a></h1><p>The unused linter makes sure that every tactic call actually changes <em>something</em>.</p><p>The inner workings of the linter are as follows.</p><p>The linter inspects the goals before and after each tactic execution.
If they are not identical, the linter is happy.
If they are identical, then the linter checks if the tactic is whitelisted.
Possible reason for whitelisting are</p><ul>
<li>tactics that emit messages, such as <code>have?</code>, <code>extract_goal</code>, or <code>says</code>;</li>
<li>tactics that are in place to assert something, such as <code><a href="../../.././Init/Control/Basic.html#guard">guard</a></code>;</li>
<li>tactics that allow to work on a specific goal, such as <code>on_goal</code>;</li>
<li>&quot;flow control&quot; tactics, such as <code>success_if_fail</code> and related.</li>
</ul><p>The only tactic that has a bespoke criterion is <code>swap_var</code>: the reason is that the only change that
<code>swap_var</code> has is to relabel the usernames of local declarations.
Thus, to check that <code>swap_var</code> was used, so we inspect the names of all the local declarations
before and after and see if there is some change.</p><h2 class="markdown-heading" id="Notable-exclusions">Notable exclusions <a class="hover-link" href="#Notable-exclusions">#</a></h2><ul>
<li><p><code>conv</code> is completely ignored by the linter.</p>
</li>
<li><p>The linter does not enter a &quot;sequence tactic&quot;: upon finding <code>tac &lt;;&gt; [tac1, tac2, ...]</code>
the linter assumes that the tactic is doing something and does not recurse into each
<code>tac1, tac2, ...</code>.
This is just for lack of an implementation: it may not be hard to do this.</p>
</li>
<li><p>The tactic does not check the discharger for <code>linear_combination</code>,
but checks <code>linear_combination</code> itself.
The main reason is that <code>skip</code> is a common discharger tactic and the linter would
then always fail whenever the user explicitly chose to pass <code>skip</code> as a discharger tactic.</p>
</li>
</ul><h2 class="markdown-heading" id="TODO">TODO <a class="hover-link" href="#TODO">#</a></h2><ul>
<li>The linter seems to be silenced by <code>set_option ... in</code>: maybe it should enter <code>in</code>s?</li>
</ul><h2 class="markdown-heading" id="Implementation-notes">Implementation notes <a class="hover-link" href="#Implementation-notes">#</a></h2><p>Yet another linter copied from the <code>unreachableTactic</code> linter!</p></div><div class="decl" id="Mathlib.Linter.linter.unusedTactic"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/Tactic/Linter/UnusedTactic.lean#L64-L68">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/Linter/UnusedTactic.html#Mathlib.Linter.linter.unusedTactic"><span class="name">Mathlib</span>.<span class="name">Linter</span>.<span class="name">linter</span>.<span class="name">unusedTactic</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>The unused tactic linter makes sure that every tactic call actually changes <em>something</em>.</p></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>