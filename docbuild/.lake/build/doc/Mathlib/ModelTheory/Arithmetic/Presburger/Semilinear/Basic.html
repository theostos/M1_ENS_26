<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../../../.././style.css"></link><link rel="icon" href="../../../../.././favicon.svg"></link><link rel="mask-icon" href="../../../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.ModelTheory.Arithmetic.Presburger.Semilinear.Basic</title><script defer="true" src="../../../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../../../.././";</script><script>const MODULE_NAME="Mathlib.ModelTheory.Arithmetic.Presburger.Semilinear.Basic";</script><script type="module" src="../../../../.././jump-src.js"></script><script type="module" src="../../../../.././search.js"></script><script type="module" src="../../../../.././expand-nav.js"></script><script type="module" src="../../../../.././how-about.js"></script><script type="module" src="../../../../.././instances.js"></script><script type="module" src="../../../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">ModelTheory</span>.<span class="name">Arithmetic</span>.<span class="name">Presburger</span>.<span class="name">Semilinear</span>.<span class="name">Basic</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../../../.././Init.html">Init</a></li><li><a href="../../../../.././Mathlib/Algebra/Order/Pi.html">Mathlib.Algebra.Order.Pi</a></li><li><a href="../../../../.././Mathlib/Data/Matrix/ColumnRowPartitioned.html">Mathlib.Data.Matrix.ColumnRowPartitioned</a></li><li><a href="../../../../.././Mathlib/Data/Pi/Interval.html">Mathlib.Data.Pi.Interval</a></li><li><a href="../../../../.././Mathlib/Data/Rat/Floor.html">Mathlib.Data.Rat.Floor</a></li><li><a href="../../../../.././Mathlib/LinearAlgebra/Matrix/ToLin.html">Mathlib.LinearAlgebra.Matrix.ToLin</a></li><li><a href="../../../../.././Mathlib/RingTheory/Finiteness/Cardinality.html">Mathlib.RingTheory.Finiteness.Cardinality</a></li><li><a href="../../../../.././Mathlib/RingTheory/Localization/Module.html">Mathlib.RingTheory.Localization.Module</a></li><li><a href="../../../../.././Mathlib/Algebra/Group/Submonoid/Finsupp.html">Mathlib.Algebra.Group.Submonoid.Finsupp</a></li><li><a href="../../../../.././Mathlib/Algebra/Order/Group/Ideal.html">Mathlib.Algebra.Order.Group.Ideal</a></li><li><a href="../../../../.././Mathlib/Algebra/Order/Sub/Prod.html">Mathlib.Algebra.Order.Sub.Prod</a></li><li><a href="../../../../.././Mathlib/Algebra/Order/Sub/Unbundled/Hom.html">Mathlib.Algebra.Order.Sub.Unbundled.Hom</a></li><li><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html">Mathlib.ModelTheory.Arithmetic.Presburger.Semilinear.Defs</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.ModelTheory.Arithmetic.Presburger.Semilinear.Basic" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#isSemilinearSet_setOf_eq"><span class="name">isSemilinearSet_setOf_eq</span></a></div><div class="nav_link"><a class="break_within" href="#Nat.isSemilinearSet_setOf_mulVec_eq"><span class="name">Nat</span>.<span class="name">isSemilinearSet_setOf_mulVec_eq</span></a></div><div class="nav_link"><a class="break_within" href="#isLinearSet_iff_exists_fin_addMonoidHom"><span class="name">isLinearSet_iff_exists_fin_addMonoidHom</span></a></div><div class="nav_link"><a class="break_within" href="#Nat.isLinearSet_iff_exists_matrix"><span class="name">Nat</span>.<span class="name">isLinearSet_iff_exists_matrix</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.preimage"><span class="name">IsSemilinearSet</span>.<span class="name">preimage</span></a></div><div class="nav_link"><a class="break_within" href="#IsLinearSet.exists_fg_eq_subtypeVal"><span class="name">IsLinearSet</span>.<span class="name">exists_fg_eq_subtypeVal</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.exists_fg_eq_subtypeVal"><span class="name">IsSemilinearSet</span>.<span class="name">exists_fg_eq_subtypeVal</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.exists_fg_eq_subtypeVal₂"><span class="name">IsSemilinearSet</span>.<span class="name">exists_fg_eq_subtypeVal₂</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.inter"><span class="name">IsSemilinearSet</span>.<span class="name">inter</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.sInter"><span class="name">IsSemilinearSet</span>.<span class="name">sInter</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.iInter"><span class="name">IsSemilinearSet</span>.<span class="name">iInter</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.biInter"><span class="name">IsSemilinearSet</span>.<span class="name">biInter</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.biInter_finset"><span class="name">IsSemilinearSet</span>.<span class="name">biInter_finset</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.diff"><span class="name">IsSemilinearSet</span>.<span class="name">diff</span></a></div><div class="nav_link"><a class="break_within" href="#IsSemilinearSet.compl"><span class="name">IsSemilinearSet</span>.<span class="name">compl</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Semilinear-sets-are-closed-under-intersection-set-difference-and-complement">Semilinear sets are closed under intersection, set difference and complement <a class="hover-link" href="#Semilinear-sets-are-closed-under-intersection-set-difference-and-complement">#</a></h1><p>This file proves that the semilinear sets in any commutative monoid are closed under intersection
and set difference. They are also closed under complement if the monoid is finitely generated. We
prove these results on <code>ℕ ^ k</code> first (which are private APIs in this file) and then generalize to
any commutative monoid.</p><h2 class="markdown-heading" id="Main-Results">Main Results <a class="hover-link" href="#Main-Results">#</a></h2><ul>
<li><code><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#isSemilinearSet_setOf_eq">isSemilinearSet_setOf_eq</a></code>: the set of solutions to a linear equation <code>a + f x = b + g y</code> is
semilinear.</li>
<li><code><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.inter">IsSemilinearSet.inter</a></code>, <code><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.diff">IsSemilinearSet.diff</a></code>: semilinear sets are closed under intersection and
set difference.</li>
<li><code><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.compl">IsSemilinearSet.compl</a></code>: semilinear sets in a finitely generated commutative monoid are closed
under complement.</li>
</ul><h2 class="markdown-heading" id="References">References <a class="hover-link" href="#References">#</a></h2><ul>
<li>[Seymour Ginsburg and Edwin H. Spanier, <em>Bounded ALGOL-Like Languages</em>][ginsburg1964]</li>
<li>[Samuel Eilenberg and M. P. Schützenberger, <em>Rational Sets in Commutative Monoids</em>][eilenberg1969]</li>
</ul></div><div class="mod_doc"><h3 class="markdown-heading" id="Semilinearity-from-slice-property">Semilinearity from slice property <a class="hover-link" href="#Semilinearity-from-slice-property">#</a></h3><p>A set <code>s</code> is said to have slice property if <code>a + b + c ∈ s</code> whenever <code>a ∈ s</code>, <code>a + b ∈ s</code> and
<code>a + c ∈ s</code>. In <code>ℕ ^ k</code>, any set that has slice property is a semilinear set. This is an important
lemma to prove the semilinearity of linear equation solutions.</p></div><div class="mod_doc"><h3 class="markdown-heading" id="Semilinearity-of-linear-equations-and-preimages">Semilinearity of linear equations and preimages <a class="hover-link" href="#Semilinearity-of-linear-equations-and-preimages">#</a></h3></div><div class="decl" id="isSemilinearSet_setOf_eq"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L173-L182">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#isSemilinearSet_setOf_eq"><span class="name">isSemilinearSet_setOf_eq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">N</span> : <a href="../../../../.././foundational_types.html">Type</a> u_2}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">N</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddMonoid.FG">AddMonoid.FG</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">F</span> : <a href="../../../../.././foundational_types.html">Type</a> u_5}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">G</span> : <a href="../../../../.././foundational_types.html">Type</a> u_6}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Data/FunLike/Basic.html#FunLike">FunLike</a> <span class="fn">F</span> <span class="fn">M</span> <span class="fn">N</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Hom/Defs.html#AddMonoidHomClass">AddMonoidHomClass</a> <span class="fn">F</span> <span class="fn">M</span> <span class="fn">N</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Data/FunLike/Basic.html#FunLike">FunLike</a> <span class="fn">G</span> <span class="fn">M</span> <span class="fn">N</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Hom/Defs.html#AddMonoidHomClass">AddMonoidHomClass</a> <span class="fn">G</span> <span class="fn">M</span> <span class="fn">N</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">a </span><span class="fn">b</span> : <span class="fn">N</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn">F</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <span class="fn">G</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">{</a><span class="fn">x</span> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">:</a> <span class="fn">M</span> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">|</a> <span class="fn">a</span> <a href="../../../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn">f</span> <span class="fn">x</span></span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">b</span> <a href="../../../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn">g</span> <span class="fn">x</span></span><a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">}</a></span></div></div><p>The set of solutions to a linear equation <code>a + f x = b + g y</code> in a finitely generated monoid is
semilinear.</p></div></div><div class="decl" id="Nat.isSemilinearSet_setOf_mulVec_eq"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L184-L187">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#Nat.isSemilinearSet_setOf_mulVec_eq"><span class="name">Nat</span>.<span class="name">isSemilinearSet_setOf_mulVec_eq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ι</span> : <a href="../../../../.././foundational_types.html">Type</a> u_3}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">κ</span> : <a href="../../../../.././foundational_types.html">Type</a> u_4}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Data/Fintype/Defs.html#Fintype">Fintype</a> <span class="fn">κ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">u </span><span class="fn">v</span> : <span class="fn"><span class="fn">ι</span> → <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">A </span><span class="fn">B</span> : <span class="fn"><a href="../../../../.././Mathlib/LinearAlgebra/Matrix/Defs.html#Matrix">Matrix</a> <span class="fn">ι</span> <span class="fn">κ</span> <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">{</a><span class="fn">x</span> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">:</a> <span class="fn"><span class="fn">κ</span> → <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a></span> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">|</a> <span class="fn">u</span> <a href="../../../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn"><span class="fn">A</span>.<a href="../../../../.././Mathlib/Data/Matrix/Mul.html#Matrix.mulVec">mulVec</a></span> <span class="fn">x</span></span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">v</span> <a href="../../../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn"><span class="fn">B</span>.<a href="../../../../.././Mathlib/Data/Matrix/Mul.html#Matrix.mulVec">mulVec</a></span> <span class="fn">x</span></span><a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">}</a></span></div></div><p>Matrix version of <code><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#isSemilinearSet_setOf_eq">isSemilinearSet_setOf_eq</a></code>.</p></div></div><div class="decl" id="isLinearSet_iff_exists_fin_addMonoidHom"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L189-L196">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#isLinearSet_iff_exists_fin_addMonoidHom"><span class="name">isLinearSet_iff_exists_fin_addMonoidHom</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsLinearSet">IsLinearSet</a> <span class="fn">s</span></span> <a href="../../../../.././Init/Core.html#Iff">↔</a> <span class="fn">∃ (<span class="fn">a</span> : <span class="fn">M</span>) (<span class="fn">n</span> : <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a>) (<span class="fn">f</span> : <span class="fn">(<span class="fn"><a href="../../../../.././Init/Prelude.html#Fin">Fin</a> <span class="fn">n</span></span> → <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a>)</span> <a href="../../../../.././Mathlib/Algebra/Group/Hom/Defs.html#AddMonoidHom">→+</a> <span class="fn">M</span>), <span class="fn">s</span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">a</span> <a href="../../../../.././Mathlib/Algebra/Notation/Defs.html#HVAdd.hVAdd">+ᵥ</a> <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Operations.html#Set.range">Set.range</a> <span class="fn">⇑<span class="fn">f</span></span></span></span></div></div></div></div><div class="decl" id="Nat.isLinearSet_iff_exists_matrix"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L198-L202">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#Nat.isLinearSet_iff_exists_matrix"><span class="name">Nat</span>.<span class="name">isLinearSet_iff_exists_matrix</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ι</span> : <a href="../../../../.././foundational_types.html">Type</a> u_3}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<span class="fn">ι</span> → <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsLinearSet">IsLinearSet</a> <span class="fn">s</span></span> <a href="../../../../.././Init/Core.html#Iff">↔</a>   <span class="fn">∃ (<span class="fn">v</span> : <span class="fn"><span class="fn">ι</span> → <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a></span>) (<span class="fn">n</span> : <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a>) (<span class="fn">A</span> : <span class="fn"><a href="../../../../.././Mathlib/LinearAlgebra/Matrix/Defs.html#Matrix">Matrix</a> <span class="fn">ι</span> <span class="fn">(<a href="../../../../.././Init/Prelude.html#Fin">Fin</a> <span class="fn">n</span>)</span> <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a></span>), <span class="fn">s</span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">{</a><span class="fn">x</span> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">:</a> <span class="fn"><span class="fn">ι</span> → <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a></span> <a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">|</a> <span class="fn">∃ (<span class="fn">x_1</span> : <span class="fn"><span class="fn"><a href="../../../../.././Init/Prelude.html#Fin">Fin</a> <span class="fn">n</span></span> → <a href="../../../../.././Init/Prelude.html#Nat">ℕ</a></span>), <span class="fn">v</span> <a href="../../../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn"><span class="fn">A</span>.<a href="../../../../.././Mathlib/Data/Matrix/Mul.html#Matrix.mulVec">mulVec</a></span> <span class="fn">x_1</span></span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">x</span></span><a href="../../../../.././Mathlib/Data/Set/Defs.html#setOf">}</a></span></div></div></div></div><div class="decl" id="IsSemilinearSet.preimage"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L223-L233">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.preimage"><span class="name">IsSemilinearSet</span>.<span class="name">preimage</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">N</span> : <a href="../../../../.././foundational_types.html">Type</a> u_2}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">N</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddMonoid.FG">AddMonoid.FG</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">F</span> : <a href="../../../../.././foundational_types.html">Type</a> u_5}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Data/FunLike/Basic.html#FunLike">FunLike</a> <span class="fn">F</span> <span class="fn">M</span> <span class="fn">N</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Hom/Defs.html#AddMonoidHomClass">AddMonoidHomClass</a> <span class="fn">F</span> <span class="fn">M</span> <span class="fn">N</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">N</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn">F</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> (<span class="fn">⇑<span class="fn">f</span></span> <a href="../../../../.././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn">s</span>)</span></div></div><p>The preimage of a semilinear set under a homomorphism in a finitely generated monoid is
semilinear.</p></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Semilinear-sets-are-included-in-finitely-generated-submonoids">Semilinear sets are included in finitely generated submonoids <a class="hover-link" href="#Semilinear-sets-are-included-in-finitely-generated-submonoids">#</a></h3></div><div class="decl" id="IsLinearSet.exists_fg_eq_subtypeVal"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L237-L245">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsLinearSet.exists_fg_eq_subtypeVal"><span class="name">IsLinearSet</span>.<span class="name">exists_fg_eq_subtypeVal</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsLinearSet">IsLinearSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (<span class="fn">P</span> : <span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Submonoid/Defs.html#AddSubmonoid">AddSubmonoid</a> <span class="fn">M</span></span>) (<span class="fn">s'</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">↥<span class="fn">P</span></span></span>), <span class="fn"><span class="fn">P</span>.<a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddSubmonoid.FG">FG</a></span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsLinearSet">IsLinearSet</a> <span class="fn">s'</span></span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn">s</span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../../.././Init/Prelude.html#Subtype.val">Subtype.val</a> <a href="../../../../.././Mathlib/Data/Set/Defs.html#Set.image">''</a> <span class="fn">s'</span></span></div></div></div></div><div class="decl" id="IsSemilinearSet.exists_fg_eq_subtypeVal"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L247-L255">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.exists_fg_eq_subtypeVal"><span class="name">IsSemilinearSet</span>.<span class="name">exists_fg_eq_subtypeVal</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (<span class="fn">P</span> : <span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Submonoid/Defs.html#AddSubmonoid">AddSubmonoid</a> <span class="fn">M</span></span>) (<span class="fn">s'</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">↥<span class="fn">P</span></span></span>), <span class="fn"><span class="fn">P</span>.<a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddSubmonoid.FG">FG</a></span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s'</span></span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn">s</span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../../.././Init/Prelude.html#Subtype.val">Subtype.val</a> <a href="../../../../.././Mathlib/Data/Set/Defs.html#Set.image">''</a> <span class="fn">s'</span></span></div></div></div></div><div class="decl" id="IsSemilinearSet.exists_fg_eq_subtypeVal₂"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L257-L265">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.exists_fg_eq_subtypeVal₂"><span class="name">IsSemilinearSet</span>.<span class="name">exists_fg_eq_subtypeVal₂</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s₁ </span><span class="fn">s₂</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs₁</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₁</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs₂</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₂</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (<span class="fn">P</span> : <span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Submonoid/Defs.html#AddSubmonoid">AddSubmonoid</a> <span class="fn">M</span></span>) (<span class="fn">s₁'</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">↥<span class="fn">P</span></span></span>) (<span class="fn">s₂'</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">↥<span class="fn">P</span></span></span>),
  <span class="fn"><span class="fn">P</span>.<a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddSubmonoid.FG">FG</a></span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₁'</span></span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn">s₁</span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../../.././Init/Prelude.html#Subtype.val">Subtype.val</a> <a href="../../../../.././Mathlib/Data/Set/Defs.html#Set.image">''</a> <span class="fn">s₁'</span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₂'</span></span> <a href="../../../../.././Init/Prelude.html#And">∧</a> <span class="fn">s₂</span> <a href="../../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../../.././Init/Prelude.html#Subtype.val">Subtype.val</a> <a href="../../../../.././Mathlib/Data/Set/Defs.html#Set.image">''</a> <span class="fn">s₂'</span></span></div></div></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Semilinearity-of-intersection">Semilinearity of intersection <a class="hover-link" href="#Semilinearity-of-intersection">#</a></h3></div><div class="decl" id="IsSemilinearSet.inter"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L290-L301">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.inter"><span class="name">IsSemilinearSet</span>.<span class="name">inter</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s₁ </span><span class="fn">s₂</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs₁</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₁</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs₂</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₂</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> (<span class="fn">s₁</span> <a href="../../../../.././Init/Core.html#Inter.inter">∩</a> <span class="fn">s₂</span>)</span></div></div><p>Semilinear sets are closed under intersection.</p></div></div><div class="decl" id="IsSemilinearSet.sInter"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L303-L309">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.sInter"><span class="name">IsSemilinearSet</span>.<span class="name">sInter</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddMonoid.FG">AddMonoid.FG</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">S</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span>)</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hS</span> : <span class="fn"><span class="fn">S</span>.<a href="../../../../.././Mathlib/Data/Finite/Defs.html#Set.Finite">Finite</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hS'</span> : <span class="fn">∀ <span class="fn">s</span> ∈ <span class="fn">S</span>, <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> (<a href="../../../../.././Mathlib/Order/SetNotation.html#Set.sInter">⋂₀</a> <span class="fn">S</span>)</span></div></div></div></div><div class="decl" id="IsSemilinearSet.iInter"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L311-L315">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.iInter"><span class="name">IsSemilinearSet</span>.<span class="name">iInter</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ι</span> : <a href="../../../../.././foundational_types.html">Type</a> u_3}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddMonoid.FG">AddMonoid.FG</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Data/Finite/Defs.html#Finite">Finite</a> <span class="fn">ι</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><span class="fn">ι</span> → <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn">∀ (<span class="fn">i</span> : <span class="fn">ι</span>), <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">(<span class="fn">s</span> <span class="fn">i</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">(⋂ (<span class="fn">i</span> : <span class="fn">ι</span>), <span class="fn"><span class="fn">s</span> <span class="fn">i</span></span>)</span></span></div></div></div></div><div class="decl" id="IsSemilinearSet.biInter"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L317-L321">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.biInter"><span class="name">IsSemilinearSet</span>.<span class="name">biInter</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ι</span> : <a href="../../../../.././foundational_types.html">Type</a> u_3}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddMonoid.FG">AddMonoid.FG</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">ι</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">t</span> : <span class="fn"><span class="fn">ι</span> → <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><span class="fn">s</span>.<a href="../../../../.././Mathlib/Data/Finite/Defs.html#Set.Finite">Finite</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">ht</span> : <span class="fn">∀ <span class="fn">i</span> ∈ <span class="fn">s</span>, <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">(<span class="fn">t</span> <span class="fn">i</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">(⋂ <span class="fn">i</span> ∈ <span class="fn">s</span>, <span class="fn"><span class="fn">t</span> <span class="fn">i</span></span>)</span></span></div></div></div></div><div class="decl" id="IsSemilinearSet.biInter_finset"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L323-L325">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.biInter_finset"><span class="name">IsSemilinearSet</span>.<span class="name">biInter_finset</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ι</span> : <a href="../../../../.././foundational_types.html">Type</a> u_3}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddMonoid.FG">AddMonoid.FG</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Finset/Defs.html#Finset">Finset</a> <span class="fn">ι</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">t</span> : <span class="fn"><span class="fn">ι</span> → <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">ht</span> : <span class="fn">∀ <span class="fn">i</span> ∈ <span class="fn">s</span>, <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">(<span class="fn">t</span> <span class="fn">i</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">(⋂ <span class="fn">i</span> ∈ <span class="fn">s</span>, <span class="fn"><span class="fn">t</span> <span class="fn">i</span></span>)</span></span></div></div></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Semilinearity-of-complement-and-set-difference">Semilinearity of complement and set difference <a class="hover-link" href="#Semilinearity-of-complement-and-set-difference">#</a></h3><p>We first show that the complement of a proper linear set <code>s</code> in <code>ℕ ^ k</code> is semilinear, through
several private definitions:</p><ol>
<li><code>base</code>, <code>periods</code>: the base vector and the set of periods of the proper linear set <code>s</code>.</li>
<li><code>basisSet</code>, <code>basis</code>: the linearly independent periods of <code>s</code> can be extended to a basis of
<code>ℚ ^ k</code>.</li>
<li><code>fundamentalDomain</code>: the set of vectors in <code>ℕ ^ k</code>, starting from <code>base</code>, with coordinates under
<code>basis</code> in <code>[0, 1) ^ k</code>.</li>
<li><code>floor</code>, <code>fract</code>: every vector in <code>ℕ ^ k</code> can be decomposed into a <code>ℤ</code>-linear combination of
<code>basisSet</code> and a vector in <code>fundamentalDomain</code>.</li>
<li><code>setOfFractNe</code>, <code>setOfFloorNeg</code>, <code>setOfFloorPos</code>: the complement of <code>s</code> is decomposed into three
semilinear sets.</li>
</ol><p>Closure of semilinear sets under complement and set difference follows.</p></div><div class="decl" id="IsSemilinearSet.diff"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L769-L780">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.diff"><span class="name">IsSemilinearSet</span>.<span class="name">diff</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s₁ </span><span class="fn">s₂</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs₁</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₁</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs₂</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s₂</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> (<span class="fn">s₁</span> <a href="../../../../.././Init/Core.html#SDiff.sdiff">\</a> <span class="fn">s₂</span>)</span></div></div><p>Semilinear sets are closed under set difference.</p></div></div><div class="decl" id="IsSemilinearSet.compl"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.lean#L782-L786">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Basic.html#IsSemilinearSet.compl"><span class="name">IsSemilinearSet</span>.<span class="name">compl</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">M</span> : <a href="../../../../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/Algebra/Group/Defs.html#AddCommMonoid">AddCommMonoid</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href="../../../../.././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">M</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../../.././Mathlib/GroupTheory/Finiteness.html#AddMonoid.FG">AddMonoid.FG</a> <span class="fn">M</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../../.././Mathlib/ModelTheory/Arithmetic/Presburger/Semilinear/Defs.html#IsSemilinearSet">IsSemilinearSet</a> <span class="fn">s</span><a href="../../../../.././Mathlib/Order/Notation.html#HasCompl.compl">ᶜ</a></span></div></div><p>Semilinear sets in a finitely generated monoid are closed under complement.</p></div></div></main>
<nav class="nav"><iframe src="../../../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>